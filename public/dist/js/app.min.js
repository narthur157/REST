angular.module("sampleApp",["ngRoute","appRoutes","MainController","NoteController","FireFactory"]);var app=angular.module("appRoutes",[]);app.config(["$routeProvider","$locationProvider",function(a,b){a.when("/",{templateUrl:"views/home.html",controller:"MainController"}).when("/bears",{templateUrl:"views/bear.html",controller:"BearController"}).when("/notes",{templateUrl:"views/notes.html",controller:"NoteController"}),b.html5Mode(!0)}]);var app=angular.module("MainController",[]);app.controller("MainController",function(){});var app=angular.module("NoteController",["FireFactory"]);app.controller("NoteController",function(a,b){a.school="Binghamton",a.classIdentifier="CS350",a.lecture="aLecture",a.authenticated=!1,a.otherNotes=[];var c=b;c.setup(a.school,a.classIdentifier,a.lecture),a.otherNotes=c.otherNotes,console.log(a.otherNotes),a.$watch("otherNotes",function(){console.log(a.otherNotes)}),a.login=function(){c.authClient.login("google"),c.authClient&&(a.authenticated=!0)},a.logout=function(){c.authClient.logout(),a.authenticated=!1},a.showNote=function(a){c.getNote(a)}});var app=angular.module("FireFactory",[]);app.factory("FireFactory",function(){function a(){e.lectureRef.on("child_added",function(a){a.name()!==e.user.uid&&e.otherNotes.push({uid:a.name(),displayName:b(a.name()),note:a.val()})}),e.userRef=new Firebase(c+"/"+e.user.uid),e.createPad("usersPad",e.user.uid,e.userRef)}function b(a){if(!e.lectureRef)throw"LectureRefNull";if(!a)throw"getNameFromIdNullId";e.rootRef.child("users").startAt().once("value",function(b){b.forEach(function(b){return b.name()===a?b.val().displayName:void 0})})}var c="https://burning-fire-602.firebaseio.com/web/data/",d=null,e={};return e.user=null,e.authClient=null,e.rootRef=null,e.lectureRef=null,e.userRef=null,e.selectedRef=null,e.authClient=null,e.otherNotes=[],e.createPad=function(a,b,c){var d=!1;"usersPad"===a&&(d=!0);var e=document.createElement("div");e.id=a,document.getElementById("contentDiv").appendChild(e);{var f=CodeMirror(document.getElementById(a),{lineWrapping:!0,readOnly:!d});Firepad.fromCodeMirror(c,f,{richTextToolbar:d,richTextShortcuts:d,userId:b})}},e.getNote=function(a){e.selectedRef=new Firebase(c+"/"+usr.uid),createPad(a,a,e.selectedRef)},e.setup=function(f,g,h){d=c+f+"/"+g+"/"+h,this.rootRef=new Firebase(c),this.lectureRef=new Firebase(d),e.authClient=new FirebaseSimpleLogin(this.lectureRef,function(c,d){return c?(console.log(c),null):void(d?(console.log("hello, "+d.displayName),e.rootRef.child("users").child(d.uid).set({displayName:d.displayName,provider:d.provider,provider_id:d.id}),e.lectureRef.startAt().once("value",function(a){a.forEach(function(a){e.otherNotes.push({uid:a.name(),displayName:b(a.name()),note:a.val()}),console.log(e.otherNotes)})}),e.user=d,a()):(console.log("weird stuff happening"),console.log(e.lectureRef)))})},e});