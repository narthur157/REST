angular.module("sampleApp",["ngRoute","appRoutes","MainController","NoteController","BearController","BearService"]);var app=angular.module("appRoutes",[]);app.config(["$routeProvider","$locationProvider",function(a,b){a.when("/",{templateUrl:"views/home.html",controller:"MainController"}).when("/bears",{templateUrl:"views/bear.html",controller:"BearController"}).when("/notes",{templateUrl:"views/notes.html",controller:"NoteController"}),b.html5Mode(!0)}]);var app=angular.module("BearController",["BearService"]);app.controller("BearController",function(a,b){function c(){b.get().then(function(b){a.bears=b})}a.bears=[],a.name="",io.on("bearsUpdated",function(b){console.log("update broadcast received: "+b),a.bears=b,a.$apply()}),a.makeBear=function(){b.create(a.name),a.name=""},a.deleteBear=function(a){void 0!==a&&b.delete(a)},a.updateBear=function(a,c){void 0!==a&&b.update(a,c)},c()});var app=angular.module("MainController",[]);app.controller("MainController",function(){io.on("err",function(a){console.log(a)}),io.on("log",function(a){console.log("from server: "+a)})});var app=angular.module("NoteController",[]);app.controller("NoteController",function(a){function b(a,b){var d=document.createElement("div");d.id=a;var e=CodeMirror(document.getElementById(a),{lineWrapping:!0}),f=Firepad.fromCodeMirror(c,e,{richTextToolbar:!0,richTextShortcuts:!0,userId:b});f.on("ready",function(){})}a.school="Binghamton",a.classIdentifier="CS350",a.lecture="aLecture",a.authenticated=!1,a.newSchool=function(){};var c=new Firebase("https://burning-fire-602.firebaseio.com/web/data/"),d=null,e=null,f=new FirebaseSimpleLogin(c,function(f,g){if(f&&console.log(f),g){console.log("hello, "+g.displayName),c.child("users").child(g.uid).set({displayName:g.displayName,provider:g.provider,provider_id:g.id}),e=g,a.authenticated=!0,a.$apply(),console.log(a.authenticated);var h="https://burning-fire-602.firebaseio.com/web/data/"+a.school+"/"+a.classIdentifier+"/"+a.lecture;d=new Firebase(h);var i=d.startAt();i.once("value",function(a){a.forEach(function(a){console.log(a)})}),c=new Firebase(h+"/"+e.uid),b("usersPad",e.uid)}});a.login=function(){f.login("google")}});var app=angular.module("BearService",[]);app.factory("Bear",["$http","$q",function(a,b){return{get:function(){var a=b.defer();return io.emit("bears:get"),io.on("bearsSent",function(b){a.resolve(b)}),a.promise},create:function(a){io.emit("bears:create",{name:a})},"delete":function(a){io.emit("bears:remove",{_id:a})},update:function(a,b){var c={_id:a,name:b};io.emit("bears:update",c)}}}]);var app=angular.module("SchoolService",[]);app.factory("School",["$http","$q",function(a){return{get:function(){return a.get("/api/schools")},create:function(b){return a.post("/api/schools",b)},"delete":function(b){return a.delete("/api/schools/"+b)},update:function(b){return a.put("/api/schools/"+b,name)}}}]);